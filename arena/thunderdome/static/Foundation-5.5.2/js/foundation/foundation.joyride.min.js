(function(c,b,a,e){var d=d||false;Foundation.libs.joyride={name:"joyride",version:"5.5.2",defaults:{expose:false,modal:true,keyboard:true,tip_location:"bottom",nub_position:"auto",scroll_speed:1500,scroll_animation:"linear",timer:0,start_timer_on_click:true,start_offset:0,next_button:true,prev_button:true,tip_animation:"fade",pause_after:[],exposed:[],tip_animation_fade_speed:300,cookie_monster:false,cookie_name:"joyride",cookie_domain:false,cookie_expires:365,tip_container:"body",abort_on_close:true,tip_location_patterns:{top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},post_ride_callback:function(){},post_step_callback:function(){},pre_step_callback:function(){},pre_ride_callback:function(){},post_expose_callback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>',prev_button:'<a href="#" class="small button joyride-prev-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',expose_cover:'<div class="joyride-expose-cover"></div>'},expose_add_class:""},init:function(g,h,f){Foundation.inherit(this,"throttle random_str");this.settings=this.settings||c.extend({},this.defaults,(f||h));this.bindings(h,f)},go_next:function(){if(this.settings.$li.next().length<1){this.end()}else{if(this.settings.timer>0){clearTimeout(this.settings.automate);this.hide();this.show();this.startTimer()}else{this.hide();this.show()}}},go_prev:function(){if(this.settings.$li.prev().length<1){}else{if(this.settings.timer>0){clearTimeout(this.settings.automate);this.hide();this.show(null,true);this.startTimer()}else{this.hide();this.show(null,true)}}},events:function(){var f=this;c(this.scope).off(".joyride").on("click.fndtn.joyride",".joyride-next-tip, .joyride-modal-bg",function(g){g.preventDefault();this.go_next()}.bind(this)).on("click.fndtn.joyride",".joyride-prev-tip",function(g){g.preventDefault();this.go_prev()}.bind(this)).on("click.fndtn.joyride",".joyride-close-tip",function(g){g.preventDefault();this.end(this.settings.abort_on_close)}.bind(this)).on("keyup.fndtn.joyride",function(g){if(!this.settings.keyboard||!this.settings.riding){return}switch(g.which){case 39:g.preventDefault();this.go_next();break;case 37:g.preventDefault();this.go_prev();break;case 27:g.preventDefault();this.end(this.settings.abort_on_close)}}.bind(this));c(b).off(".joyride").on("resize.fndtn.joyride",f.throttle(function(){if(c("["+f.attr_name()+"]").length>0&&f.settings.$next_tip&&f.settings.riding){if(f.settings.exposed.length>0){var g=c(f.settings.exposed);g.each(function(){var h=c(this);f.un_expose(h);f.expose(h)})}if(f.is_phone()){f.pos_phone()}else{f.pos_default(false)}}},100))},start:function(){var g=this,i=c("["+this.attr_name()+"]",this.scope),f=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],h=f.length;if(!i.length>0){return}if(!this.settings.init){this.events()}this.settings=i.data(this.attr_name(true)+"-init");this.settings.$content_el=i;this.settings.$body=c(this.settings.tip_container);this.settings.body_offset=c(this.settings.tip_container).position();this.settings.$tip_content=this.settings.$content_el.find("> li");this.settings.paused=false;this.settings.attempts=0;this.settings.riding=true;if(typeof c.cookie!=="function"){this.settings.cookie_monster=false}if(!this.settings.cookie_monster||this.settings.cookie_monster&&!c.cookie(this.settings.cookie_name)){this.settings.$tip_content.each(function(j){var l=c(this);this.settings=c.extend({},g.defaults,g.data_options(l));var k=h;while(k--){g.settings[f[k]]=parseInt(g.settings[f[k]],10)}g.create({$li:l,index:j})});if(!this.settings.start_timer_on_click&&this.settings.timer>0){this.show("init");this.startTimer()}else{this.show("init")}}},resume:function(){this.set_li();this.show()},tip_template:function(g){var h,f;g.tip_class=g.tip_class||"";h=c(this.settings.template.tip).addClass(g.tip_class);f=c.trim(c(g.li).html())+this.prev_button_text(g.prev_button_text,g.index)+this.button_text(g.button_text)+this.settings.template.link+this.timer_instance(g.index);h.append(c(this.settings.template.wrapper));h.first().attr(this.add_namespace("data-index"),g.index);c(".joyride-content-wrapper",h).append(f);return h[0]},timer_instance:function(g){var f;if((g===0&&this.settings.start_timer_on_click&&this.settings.timer>0)||this.settings.timer===0){f=""}else{f=c(this.settings.template.timer)[0].outerHTML}return f},button_text:function(f){if(this.settings.tip_settings.next_button){f=c.trim(f)||"Next";f=c(this.settings.template.button).append(f)[0].outerHTML}else{f=""}return f},prev_button_text:function(g,f){if(this.settings.tip_settings.prev_button){g=c.trim(g)||"Previous";if(f==0){g=c(this.settings.template.prev_button).append(g).addClass("disabled")[0].outerHTML}else{g=c(this.settings.template.prev_button).append(g)[0].outerHTML}}else{g=""}return g},create:function(i){this.settings.tip_settings=c.extend({},this.settings,this.data_options(i.$li));var h=i.$li.attr(this.add_namespace("data-button"))||i.$li.attr(this.add_namespace("data-text")),g=i.$li.attr(this.add_namespace("data-button-prev"))||i.$li.attr(this.add_namespace("data-prev-text")),f=i.$li.attr("class"),j=c(this.tip_template({tip_class:f,index:i.index,button_text:h,prev_button_text:g,li:i.$li}));c(this.settings.tip_container).append(j)},show:function(i,f){var h=null;if(this.settings.$li===e||(c.inArray(this.settings.$li.index(),this.settings.pause_after)===-1)){if(this.settings.paused){this.settings.paused=false}else{this.set_li(i,f)}this.settings.attempts=0;if(this.settings.$li.length&&this.settings.$target.length>0){if(i){this.settings.pre_ride_callback(this.settings.$li.index(),this.settings.$next_tip);if(this.settings.modal){this.show_modal()}}this.settings.pre_step_callback(this.settings.$li.index(),this.settings.$next_tip);if(this.settings.modal&&this.settings.expose){this.expose()}this.settings.tip_settings=c.extend({},this.settings,this.data_options(this.settings.$li));this.settings.timer=parseInt(this.settings.timer,10);this.settings.tip_settings.tip_location_pattern=this.settings.tip_location_patterns[this.settings.tip_settings.tip_location];if(!/body/i.test(this.settings.$target.selector)){var g=c(".joyride-modal-bg");if(/pop/i.test(this.settings.tipAnimation)){g.hide()}else{g.fadeOut(this.settings.tipAnimationFadeSpeed)}this.scroll_to()}if(this.is_phone()){this.pos_phone(true)}else{this.pos_default(true)}h=this.settings.$next_tip.find(".joyride-timer-indicator");if(/pop/i.test(this.settings.tip_animation)){h.width(0);if(this.settings.timer>0){this.settings.$next_tip.show();setTimeout(function(){h.animate({width:h.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fade_speed)}else{this.settings.$next_tip.show()}}else{if(/fade/i.test(this.settings.tip_animation)){h.width(0);if(this.settings.timer>0){this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed).show();setTimeout(function(){h.animate({width:h.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fade_speed)}else{this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed)}}}this.settings.$current_tip=this.settings.$next_tip}else{if(this.settings.$li&&this.settings.$target.length<1){this.show(i,f)}else{this.end()}}}else{this.settings.paused=true}},is_phone:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},hide:function(){if(this.settings.modal&&this.settings.expose){this.un_expose()}if(!this.settings.modal){c(".joyride-modal-bg").hide()}this.settings.$current_tip.css("visibility","hidden");setTimeout(c.proxy(function(){this.hide();this.css("visibility","visible")},this.settings.$current_tip),0);this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip)},set_li:function(g,f){if(g){this.settings.$li=this.settings.$tip_content.eq(this.settings.start_offset);this.set_next_tip();this.settings.$current_tip=this.settings.$next_tip}else{if(f){this.settings.$li=this.settings.$li.prev()}else{this.settings.$li=this.settings.$li.next()}this.set_next_tip()}this.set_target()},set_next_tip:function(){this.settings.$next_tip=c(".joyride-tip-guide").eq(this.settings.$li.index());this.settings.$next_tip.data("closed","")},set_target:function(){var f=this.settings.$li.attr(this.add_namespace("data-class")),h=this.settings.$li.attr(this.add_namespace("data-id")),g=function(){if(h){return c(a.getElementById(h))}else{if(f){return c("."+f).first()}else{return c("body")}}};this.settings.$target=g()},scroll_to:function(){var g,f;g=c(b).height()/2;f=Math.ceil(this.settings.$target.offset().top-g+this.settings.$next_tip.outerHeight());if(f!=0){c("html, body").stop().animate({scrollTop:f},this.settings.scroll_speed,"swing")}},paused:function(){return(c.inArray((this.settings.$li.index()+1),this.settings.pause_after)===-1)},restart:function(){this.hide();this.settings.$li=e;this.show("init")},pos_default:function(k){var j=this.settings.$next_tip.find(".joyride-nub"),i=Math.ceil(j.outerWidth()/2),l=Math.ceil(j.outerHeight()/2),f=k||false;if(f){this.settings.$next_tip.css("visibility","hidden");this.settings.$next_tip.show()}if(!/body/i.test(this.settings.$target.selector)){var g=this.settings.tip_settings.tipAdjustmentY?parseInt(this.settings.tip_settings.tipAdjustmentY):0,h=this.settings.tip_settings.tipAdjustmentX?parseInt(this.settings.tip_settings.tipAdjustmentX):0;if(this.bottom()){if(this.rtl){this.settings.$next_tip.css({top:(this.settings.$target.offset().top+l+this.settings.$target.outerHeight()+g),left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()+h})}else{this.settings.$next_tip.css({top:(this.settings.$target.offset().top+l+this.settings.$target.outerHeight()+g),left:this.settings.$target.offset().left+h})}this.nub_position(j,this.settings.tip_settings.nub_position,"top")}else{if(this.top()){if(this.rtl){this.settings.$next_tip.css({top:(this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-l+g),left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()})}else{this.settings.$next_tip.css({top:(this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-l+g),left:this.settings.$target.offset().left+h})}this.nub_position(j,this.settings.tip_settings.nub_position,"bottom")}else{if(this.right()){this.settings.$next_tip.css({top:this.settings.$target.offset().top+g,left:(this.settings.$target.outerWidth()+this.settings.$target.offset().left+i+h)});this.nub_position(j,this.settings.tip_settings.nub_position,"left")}else{if(this.left()){this.settings.$next_tip.css({top:this.settings.$target.offset().top+g,left:(this.settings.$target.offset().left-this.settings.$next_tip.outerWidth()-i+h)});this.nub_position(j,this.settings.tip_settings.nub_position,"right")}}}}if(!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tip_settings.tip_location_pattern.length){j.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left");this.settings.tip_settings.tip_location=this.settings.tip_settings.tip_location_pattern[this.settings.attempts];this.settings.attempts++;this.pos_default()}}else{if(this.settings.$li.length){this.pos_modal(j)}}if(f){this.settings.$next_tip.hide();this.settings.$next_tip.css("visibility","visible")}},pos_phone:function(k){var j=this.settings.$next_tip.outerHeight(),i=this.settings.$next_tip.offset(),h=this.settings.$target.outerHeight(),g=c(".joyride-nub",this.settings.$next_tip),l=Math.ceil(g.outerHeight()/2),f=k||false;g.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left");if(f){this.settings.$next_tip.css("visibility","hidden");this.settings.$next_tip.show()}if(!/body/i.test(this.settings.$target.selector)){if(this.top()){this.settings.$next_tip.offset({top:this.settings.$target.offset().top-j-l});g.addClass("bottom")}else{this.settings.$next_tip.offset({top:this.settings.$target.offset().top+h+l});g.addClass("top")}}else{if(this.settings.$li.length){this.pos_modal(g)}}if(f){this.settings.$next_tip.hide();this.settings.$next_tip.css("visibility","visible")}},pos_modal:function(f){this.center();f.hide();this.show_modal()},show_modal:function(){if(!this.settings.$next_tip.data("closed")){var f=c(".joyride-modal-bg");if(f.length<1){var f=c(this.settings.template.modal);f.appendTo("body")}if(/pop/i.test(this.settings.tip_animation)){f.show()}else{f.fadeIn(this.settings.tip_animation_fade_speed)}}},expose:function(){var g,j,i,k,f,h="expose-"+this.random_str(6);if(arguments.length>0&&arguments[0] instanceof c){i=arguments[0]}else{if(this.settings.$target&&!/body/i.test(this.settings.$target.selector)){i=this.settings.$target}else{return false}}if(i.length<1){if(b.console){console.error("element not valid",i)}return false}g=c(this.settings.template.expose);this.settings.$body.append(g);g.css({top:i.offset().top,left:i.offset().left,width:i.outerWidth(true),height:i.outerHeight(true)});j=c(this.settings.template.expose_cover);k={zIndex:i.css("z-index"),position:i.css("position")};f=i.attr("class")==null?"":i.attr("class");i.css("z-index",parseInt(g.css("z-index"))+1);if(k.position=="static"){i.css("position","relative")}i.data("expose-css",k);i.data("orig-class",f);i.attr("class",f+" "+this.settings.expose_add_class);j.css({top:i.offset().top,left:i.offset().left,width:i.outerWidth(true),height:i.outerHeight(true)});if(this.settings.modal){this.show_modal()}this.settings.$body.append(j);g.addClass(h);j.addClass(h);i.data("expose",h);this.settings.post_expose_callback(this.settings.$li.index(),this.settings.$next_tip,i);this.add_exposed(i)},un_expose:function(){var f,j,h,k,g,i=false;if(arguments.length>0&&arguments[0] instanceof c){j=arguments[0]}else{if(this.settings.$target&&!/body/i.test(this.settings.$target.selector)){j=this.settings.$target}else{return false}}if(j.length<1){if(b.console){console.error("element not valid",j)}return false}f=j.data("expose");h=c("."+f);if(arguments.length>1){i=arguments[1]}if(i===true){c(".joyride-expose-wrapper,.joyride-expose-cover").remove()}else{h.remove()}k=j.data("expose-css");if(k.zIndex=="auto"){j.css("z-index","")}else{j.css("z-index",k.zIndex)}if(k.position!=j.css("position")){if(k.position=="static"){j.css("position","")}else{j.css("position",k.position)}}g=j.data("orig-class");j.attr("class",g);j.removeData("orig-classes");j.removeData("expose");j.removeData("expose-z-index");this.remove_exposed(j)},add_exposed:function(f){this.settings.exposed=this.settings.exposed||[];if(f instanceof c||typeof f==="object"){this.settings.exposed.push(f[0])}else{if(typeof f=="string"){this.settings.exposed.push(f)}}},remove_exposed:function(h){var g,f;if(h instanceof c){g=h[0]}else{if(typeof h=="string"){g=h}}this.settings.exposed=this.settings.exposed||[];f=this.settings.exposed.length;while(f--){if(this.settings.exposed[f]==g){this.settings.exposed.splice(f,1);return}}},center:function(){var f=c(b);this.settings.$next_tip.css({top:(((f.height()-this.settings.$next_tip.outerHeight())/2)+f.scrollTop()),left:(((f.width()-this.settings.$next_tip.outerWidth())/2)+f.scrollLeft())});return true},bottom:function(){return/bottom/i.test(this.settings.tip_settings.tip_location)},top:function(){return/top/i.test(this.settings.tip_settings.tip_location)},right:function(){return/right/i.test(this.settings.tip_settings.tip_location)},left:function(){return/left/i.test(this.settings.tip_settings.tip_location)},corners:function(j){var f=c(b),m=f.height()/2,k=Math.ceil(this.settings.$target.offset().top-m+this.settings.$next_tip.outerHeight()),i=f.width()+f.scrollLeft(),h=f.height()+k,g=f.height()+f.scrollTop(),l=f.scrollTop();if(k<l){if(k<0){l=0}else{l=k}}if(h>g){g=h}return[j.offset().top<l,i<j.offset().left+j.outerWidth(),g<j.offset().top+j.outerHeight(),f.scrollLeft()>j.offset().left]},visible:function(f){var g=f.length;while(g--){if(f[g]){return false}}return true},nub_position:function(f,h,g){if(h==="auto"){f.addClass(g)}else{f.addClass(h)}},startTimer:function(){if(this.settings.$li.length){this.settings.automate=setTimeout(function(){this.hide();this.show();this.startTimer()}.bind(this),this.settings.timer)}else{clearTimeout(this.settings.automate)}},end:function(f){if(this.settings.cookie_monster){c.cookie(this.settings.cookie_name,"ridden",{expires:this.settings.cookie_expires,domain:this.settings.cookie_domain})}if(this.settings.timer>0){clearTimeout(this.settings.automate)}if(this.settings.modal&&this.settings.expose){this.un_expose()}c(this.scope).off("keyup.joyride");this.settings.$next_tip.data("closed",true);this.settings.riding=false;c(".joyride-modal-bg").hide();this.settings.$current_tip.hide();if(typeof f==="undefined"||f===false){this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip);this.settings.post_ride_callback(this.settings.$li.index(),this.settings.$current_tip)}c(".joyride-tip-guide").remove()},off:function(){c(this.scope).off(".joyride");c(b).off(".joyride");c(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride");c(".joyride-tip-guide, .joyride-modal-bg").remove();clearTimeout(this.settings.automate);this.settings={}},reflow:function(){}}}(jQuery,window,window.document));